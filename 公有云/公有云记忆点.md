格式化硬盘

```
mkfs
```

安装NFS

```
yum install -y nfs-utils rpcbind

/nfs/code *(rw)

权限不够，后面打开权限就可以
```

wordpress

```
yum isntall -y mariadb-server php php-fpm php-mysql php-gd
记不住写php*号

rpm -ivh gpmall-repo/packages/nginx
修改nginx配置文件  外网ip添加默认访问index.php和php方式访问  修改成工作目录

修改php配置文件/etc/php-fpm.d/www.conf    修改apache用户和组

启动各服务 “数据库 nginx php-fpm”

导入数据 授权

替换前端文件，修改config文件名并修改内容


报错查看/var/log/nginx/error.log
```

放通NFS端口

```
UDP:123
```

数据库主从同步

```
(3)、修改主库配置文件

 log-bin:设置logbin文件名称，最好不要改动位置。

 server-id:该id主从之间必须是唯一，唯一的标识。

 binlog-ignore-db:指定不可以主从同步的数据库，多数据库则配置多行


/etc/my.cnf.d/server.cnf
[msyqld]
server-id=1
binlog-ignore=mysql
log-bin=mysql-bin

登录主数据库设置主从同步用户

登录从数据库配置从配置
change master to master_host='',master_user='',master_password='';

start slave;

查看 show status slave \G;
```

读写分离

```
中间节点
安装java环境
yum install MariaDB-client -y

修改配置文件


指向中间节点
修改配置文件改成中间节点
```

数据库迁移至公有云实例

```
修改配置文件改成公有云数据库实例

远程登录数据库导入库
```

备份数据库/result

```
msyqldump -uroot -pAbc@1234 wordpress > /result/mysql_bak.sql
```

扩容云硬盘

```
还需要进入Linux系统，进行文件系统的扩容
resize2fs /dev/vdb
df -TH
```

网上商城

```
域名解析

修改nginx配置文件   注:修改成公网地址

执行jar包  ps -ef 
```

