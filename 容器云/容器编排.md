#### 配置路由转发

RHEL/CentOS7上的一些用户报告了由于iptables被绕过而导致流量路由不正确的问题，所以需要在各节点开启路由转发，确保iptables工具可以处理网桥流量。

```sh
 cat << EOF | tee /etc/sysctl.d/k8s.conf
# tee  从标准输入读取数据并重定向到标准输出和文件    通过管道符
net.ipv4.ip_forward = 1               #数据包转发
net.bridge.bridge-nf-call-ip6tables = 1    #二层的网桥在转发包时也会被iptables的FORWARD规则所过滤
net.bridge.bridge-nf-call-iptables = 1     #二层的网桥在转发包时也会被iptables的FORWARD规则所过滤
EOF
# modprobe br_netfilter                    #模块加载网络过滤器
# sysctl -p /etc/sysctl.d/k8s.conf         
```

```sh
#安装相关工具
yum -y install yum-utils device-mapper-persistent-data lvm2
```

```sh
#安装docker
 yum install -y docker-ce
#并设置开机启动

#导入镜像
 docker load -i /opt/offline_images.tar
```

配置docker-compose

```
移动文件并赋予权限
```

